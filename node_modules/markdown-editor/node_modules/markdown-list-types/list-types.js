function listTypes(str) {
  str = str.replace(/\r\n|\r/g, '\n')
    .replace(/\u00a0/g, ' ')
    .replace(/\u2424/g, '\n');

  var lines = str.split('\n');
  lines.forEach(function(line, i) {
    line = line.replace(/^(\s*)([ivx]+)\.\s(?=.)/i, function(match, whitespace, roman_num) {
      return whitespace + romanToDecimal(roman_num) + '. ';
    });
    line = line.replace(/^(\s*)([a-z]+)\.\s(?=.)/i, function(match, whitespace, alpha) {
      return whitespace + (alpha.toUpperCase().charCodeAt(0) - 64) + '. ';
    });
    lines[i] = line;
  });
  return lines.join('\n');
}

var roman_vals = {
  'i': 1,
  'v': 5,
  'x': 10
}
function romanToDecimal(roman) {
  roman = roman.toLowerCase();
  var total = 0;
  for (var n = 0; n < roman.length; ++n) {
    var letter = roman[n];
    var val = roman_vals[letter];

    if (letter == 'i' && (roman[n + 1] == 'v' || roman[n + 1] == 'x'))
      total -= val;
    else
      total += val;
  }
  return total;
}

module.exports = listTypes;